/******************************************
 * @name 无忧短视频🚗
 * @channel https://t.me/yqc_123
 * @feedback https://t.me/yqc_777
 * @update 20240407
 * @version 1.1.0
 ******************************************
1.本脚本仅用于技术学习，禁止非法使用。
2.不得将本脚本用于任何商业或违法用途，违者后果自负。
3.在中国大陆地区，严禁传播本脚本。
4.开发者不对脚本的滥用承担任何责任。
5.违规使用导致的后果由使用者自行承担。
6.如有违反相关法规，将立即删除本脚本。
7.使用者若违反声明规定，将自动视为放弃使用权。
8.本声明的最终解释权归开发者所有。
******************************************

脚本描述: 解锁所有视频、线路, 全局净化
在线地址: https://adfsjs.com/
下载地址: https://rm4n9.com/?pc=TVBQNR

******************************************
^https:\/\/(wyaapi.xsy124006.asia|d3cd3rn5299ol7.cloudfront.net|d3ekdcyt77miso.cloudfront.net)\/api\/app\/(ping\/domain\/h5|vid\/(info\/?|user\/count|tiroCountdown)|mine\/info) url script-response-body https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/wydsp.js

hostname = wyaapi.xsy124006.asia,d3cd3rn5299ol7.cloudfront.net,d3ekdcyt77miso.cloudfront.net
******************************************/
const $ = new Env('无忧短视频')
var _0xoda='jsjiami.com.v7';const _0x313e59=_0x476c;(function(_0xc501a8,_0x24e6fd,_0x41310e,_0x513375,_0x39b800,_0x1ef475,_0x55e5aa){return _0xc501a8=_0xc501a8>>0x9,_0x1ef475='hs',_0x55e5aa='hs',function(_0x5e542d,_0x30e1df,_0x3dad8e,_0x1976ec,_0x212043){const _0x32e9ba=_0x476c;_0x1976ec='tfi',_0x1ef475=_0x1976ec+_0x1ef475,_0x212043='up',_0x55e5aa+=_0x212043,_0x1ef475=_0x3dad8e(_0x1ef475),_0x55e5aa=_0x3dad8e(_0x55e5aa),_0x3dad8e=0x0;const _0x2129b1=_0x5e542d();while(!![]&&--_0x513375+_0x30e1df){try{_0x1976ec=-parseInt(_0x32e9ba(0xc0,'6)SN'))/0x1+parseInt(_0x32e9ba(0xd3,'hB!a'))/0x2+parseInt(_0x32e9ba(0x10b,'R3B4'))/0x3*(parseInt(_0x32e9ba(0xcb,'6)SN'))/0x4)+-parseInt(_0x32e9ba(0xc7,'PgND'))/0x5+parseInt(_0x32e9ba(0xc4,'YSMK'))/0x6*(parseInt(_0x32e9ba(0xcd,'PXdt'))/0x7)+parseInt(_0x32e9ba(0xe4,'39#E'))/0x8*(parseInt(_0x32e9ba(0x12d,'39#E'))/0x9)+-parseInt(_0x32e9ba(0x10e,'J1NI'))/0xa;}catch(_0x493053){_0x1976ec=_0x3dad8e;}finally{_0x212043=_0x2129b1[_0x1ef475]();if(_0xc501a8<=_0x513375)_0x3dad8e?_0x39b800?_0x1976ec=_0x212043:_0x39b800=_0x212043:_0x3dad8e=_0x212043;else{if(_0x3dad8e==_0x39b800['replace'](/[VFDdEnfLRCXWqrbxUeG=]/g,'')){if(_0x1976ec===_0x30e1df){_0x2129b1['un'+_0x1ef475](_0x212043);break;}_0x2129b1[_0x55e5aa](_0x212043);}}}}}(_0x41310e,_0x24e6fd,function(_0x2afbc5,_0x24ed08,_0x9d6fba,_0xe51f02,_0x278b73,_0x55031c,_0x316e89){return _0x24ed08='\x73\x70\x6c\x69\x74',_0x2afbc5=arguments[0x0],_0x2afbc5=_0x2afbc5[_0x24ed08](''),_0x9d6fba='\x72\x65\x76\x65\x72\x73\x65',_0x2afbc5=_0x2afbc5[_0x9d6fba]('\x76'),_0xe51f02='\x6a\x6f\x69\x6e',(0x16192f,_0x2afbc5[_0xe51f02](''));});}(0x18c00,0x9bb01,_0x1fc7,0xc8),_0x1fc7)&&(_0xoda=0xc8);let body=$response[_0x313e59(0xbf,'gCN4')];const NOTICE_KEY='wuyou_'+$[_0x313e59(0x103,'ng]d')](_0x313e59(0xce,'noln'))+'_notified';function _0x8288625(_0x7b6212){const _0xbe4fbc=_0x313e59,_0x1f5509={'lCcVQ':function(_0x27d143,_0x3506d0){return _0x27d143(_0x3506d0);},'fAklv':function(_0x568952,_0x3e9de0){return _0x568952(_0x3e9de0);},'pZock':'application/json','yyRuA':_0xbe4fbc(0xc9,'eQlL')};return new Promise((_0x52ffdd,_0x31bd6d)=>{const _0x8d7052=_0xbe4fbc,_0x115faa={'RbNRc':function(_0x242571,_0x2f71dc){const _0x449b1a=_0x476c;return _0x1f5509[_0x449b1a(0x137,'1HIB')](_0x242571,_0x2f71dc);},'BVSxa':function(_0x1bc9e1,_0x3e6267){const _0x2f5d45=_0x476c;return _0x1f5509[_0x2f5d45(0xe3,'Mv#Z')](_0x1bc9e1,_0x3e6267);}};$[_0x8d7052(0x120,'igM*')]({'url':_0x8d7052(0xfb,'ffc7'),'headers':{'Content-Type':_0x1f5509[_0x8d7052(0x117,'GVO9')]},'body':JSON[_0x8d7052(0x12c,'GVO9')]({'yh':_0x7b6212,'appid':_0x1f5509[_0x8d7052(0xf0,'p4&A')]})},(_0x3c272c,_0x33ab10,_0x3de378)=>{const _0x3d320d=_0x8d7052;if(_0x3c272c)_0x115faa['RbNRc'](_0x31bd6d,_0x3c272c);else{const {success:_0x4de782,data:_0xffa137,message:_0x4bb08e}=JSON[_0x3d320d(0xef,'lVY2')](_0x3de378);_0x4de782?_0x115faa['BVSxa'](_0x52ffdd,_0xffa137):_0x115faa['RbNRc'](_0x31bd6d,_0x4bb08e);}});});}let _object;(async()=>{const _0x22d5c7=_0x313e59,_0x55f10f={'DHzTc':function(_0x145688,_0x1e31e1){return _0x145688(_0x1e31e1);},'jKZcM':'wuyou','VWwdy':_0x22d5c7(0x134,'FwHa'),'RiVoc':function(_0x22769e){return _0x22769e();},'kOmKP':_0x22d5c7(0xed,'J28n'),'oEWwE':function(_0x4cb6eb,_0x2e2d93){return _0x4cb6eb===_0x2e2d93;},'nAahV':'jpcmb','rzuiJ':function(_0x1703d5,_0x5ed3a8){return _0x1703d5!==_0x5ed3a8;},'jIqlC':'PWfcU','VhpZY':_0x22d5c7(0x124,'mUSo'),'plEsJ':_0x22d5c7(0xd2,'eQlL'),'kcYTt':_0x22d5c7(0xd5,'ng]d'),'bVnva':_0x22d5c7(0xca,'0gHP')};await _0x55f10f[_0x22d5c7(0x10d,'43[i')](getNotceAndSetCache);try{_object=JSON[_0x22d5c7(0xe6,'yWPO')](body);}catch(_0x288cdd){}let _0x3edef4=_object[_0x22d5c7(0xf5,'mUSo')]?await _0x8288625(_object['data']):_object[_0x22d5c7(0x115,'6)SN')];if(/ping\/domain\/h5/[_0x22d5c7(0xf4,'I9!@')]($request['url'])){const _0x31ead1=_0x55f10f['kOmKP'][_0x22d5c7(0xfe,'&9D(')]('|');let _0x57d8d1=0x0;while(!![]){switch(_0x31ead1[_0x57d8d1++]){case'0':_0x3edef4['adsInfoList']=[];continue;case'1':_0x3edef4[_0x22d5c7(0xe2,'I3oJ')]=-0x1;continue;case'2':_0x3edef4['louFengH5']='';continue;case'3':_0x3edef4[_0x22d5c7(0xdf,'0gHP')]='';continue;case'4':_0x3edef4[_0x22d5c7(0xe9,'jG[i')]='';continue;}break;}}/vip\/tiroCountdown/[_0x22d5c7(0x113,'eQlL')]($request[_0x22d5c7(0x128,'YSMK')])&&(_0x3edef4[_0x22d5c7(0x126,'j$$i')]=-0x1);/vid\/info\?/['test']($request[_0x22d5c7(0xc8,'J28n')])&&(_0x3edef4[_0x22d5c7(0xbe,'mUSo')]&&_0x3edef4['sourceURL']&&(_0x3edef4['previewURL']=''),_0x3edef4['vidStatus'][_0x22d5c7(0x111,'YSMK')]=!![],_0x3edef4[_0x22d5c7(0x12e,'l)sv')]['isFreeWatch']=!![],_0x3edef4[_0x22d5c7(0x127,'jG[i')]=_0x3edef4[_0x22d5c7(0x12a,'hjmf')]);if(/vid\/user\/count/[_0x22d5c7(0xe8,'v!%m')]($request[_0x22d5c7(0xcf,'mUSo')])){if(_0x55f10f[_0x22d5c7(0x112,'#Q%d')](_0x22d5c7(0x109,'Bnhg'),_0x55f10f['nAahV'])){const _0x50f3e3={'UxsJf':function(_0x258be2,_0x27c0ae){return _0x258be2(_0x27c0ae);},'DgxTz':function(_0x8766d8,_0x2f6224){const _0x4e11e7=_0x22d5c7;return _0x55f10f[_0x4e11e7(0x121,'PgND')](_0x8766d8,_0x2f6224);},'NRGJc':_0x22d5c7(0xbc,'ng]d'),'IHYta':_0x55f10f[_0x22d5c7(0xdd,'j$$i')]};return new _0x632f43((_0x3ad28b,_0x1bd9cf)=>{const _0x2f4ef3=_0x22d5c7;_0x5f2244[_0x2f4ef3(0x118,'ng]d')]({'url':_0x2f4ef3(0xde,'$K1*'),'headers':{'Content-Type':_0x50f3e3['NRGJc']},'body':_0x38c3f3[_0x2f4ef3(0x10f,'Mv#Z')]({'yh':_0x5590b0,'appid':_0x50f3e3[_0x2f4ef3(0xdc,'J28n')]})},(_0x59254b,_0x147ca4,_0x3b5b06)=>{const _0x32e2a2=_0x2f4ef3;if(_0x59254b)_0x50f3e3[_0x32e2a2(0xd7,'FwHa')](_0x1bd9cf,_0x59254b);else{const {success:_0x45d98,data:_0x1a36f8,message:_0x2ce9ee}=_0x1d4bd4[_0x32e2a2(0xd0,'k0Jx')](_0x3b5b06);_0x45d98?_0x3ad28b(_0x1a36f8):_0x50f3e3[_0x32e2a2(0x114,'l)sv')](_0x1bd9cf,_0x2ce9ee);}});});}else _0x3edef4[_0x22d5c7(0x10c,'Mv#Z')]=!![],_0x3edef4[_0x22d5c7(0xc3,'FwHa')]=0x3e7;}if(/mine\/info/[_0x22d5c7(0xe7,'#Q%d')]($request[_0x22d5c7(0x129,'hjmf')])){if(_0x55f10f[_0x22d5c7(0xfd,'ahzS')](_0x55f10f['jIqlC'],_0x55f10f[_0x22d5c7(0x110,'dd3]')])){const _0x2d321e=_0x55f10f[_0x22d5c7(0x102,'l)sv')][_0x22d5c7(0xcc,'ahzS')]('|');let _0x4a2ca3=0x0;while(!![]){switch(_0x2d321e[_0x4a2ca3++]){case'0':_0x142fce['randomBanner']='';continue;case'1':_0x4233f0['adsInfoList']=[];continue;case'2':_0x4485b6['active_2023_url']='';continue;case'3':_0x2fc590['adsTimeLongVideo']=-0x1;continue;case'4':_0x5a3eb1[_0x22d5c7(0x10a,'l)sv')]='';continue;}break;}}else _0x3edef4={..._0x3edef4,'collectionCount':0x3e7,'isVip':!![],'vipName':_0x55f10f[_0x22d5c7(0xc2,'43[i')],'isFollow':!![],'buyVidCount':0x3e7,'videoDiscountExpiration':_0x22d5c7(0x104,'#Q%d'),'happinessPlazaCount':0x3e7,'userVideoCount':0x3e7,'mobile':_0x55f10f[_0x22d5c7(0xc5,'Mv#Z')],'name':_0x55f10f['kcYTt'],'summary':_0x22d5c7(0xfa,'lVY2'),'vipLevel':0x1,'hasLocked':!![],'lockReason':'','hasBanned':![],'forbidUpload':![],'watchCount':0x3e7,'trueScore':0x3e7,'vipExpireDate':_0x55f10f[_0x22d5c7(0xc6,'t*KZ')],'superUser':!![],'superUserExpire':'2999-01-01T00:00:00Z','officialCert':!![],'taxLevel':0x1,'rewarded':'1','follows':0x3e7,'fans':0x3e7,'snapVip':0x1,'goldVideoFreeExpire':_0x55f10f[_0x22d5c7(0xec,'D37)')],'hasFirstChargeWaLi':!![],'hasFirstChargeVID':!![],'merchantAccount':'','payVidDiscount':0x1,'vidUploadCount':0x3e7,'level':0x0};}body=JSON[_0x22d5c7(0x119,'k0Jx')]({..._object,'data':_0x3edef4,'hash':![]});})()['catch'](_0x2e6eaf=>$[_0x313e59(0x11f,'Bnhg')]('','❌'+$[_0x313e59(0xd6,'Bnhg')]+',\x20错误!',_0x2e6eaf))[_0x313e59(0x100,'I9!@')](()=>$[_0x313e59(0xf8,'I9!@')]({'body':body}));function _0x476c(_0x1a3491,_0x4c181f){const _0x1fc741=_0x1fc7();return _0x476c=function(_0x476cfe,_0x3860fc){_0x476cfe=_0x476cfe-0xbc;let _0x321ff4=_0x1fc741[_0x476cfe];if(_0x476c['NEgWib']===undefined){var _0x5bc27a=function(_0x2b65b7){const _0xbccc23='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2b8df1='',_0x48ff30='';for(let _0x632f43=0x0,_0x428912,_0x1f9e4c,_0x3e8432=0x0;_0x1f9e4c=_0x2b65b7['charAt'](_0x3e8432++);~_0x1f9e4c&&(_0x428912=_0x632f43%0x4?_0x428912*0x40+_0x1f9e4c:_0x1f9e4c,_0x632f43++%0x4)?_0x2b8df1+=String['fromCharCode'](0xff&_0x428912>>(-0x2*_0x632f43&0x6)):0x0){_0x1f9e4c=_0xbccc23['indexOf'](_0x1f9e4c);}for(let _0x2ce6a4=0x0,_0x5f2244=_0x2b8df1['length'];_0x2ce6a4<_0x5f2244;_0x2ce6a4++){_0x48ff30+='%'+('00'+_0x2b8df1['charCodeAt'](_0x2ce6a4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x48ff30);};const _0x5088c2=function(_0x38c3f3,_0x5590b0){let _0x580a8b=[],_0xcb6bc8=0x0,_0x1d4bd4,_0xbe509c='';_0x38c3f3=_0x5bc27a(_0x38c3f3);let _0x28fdad;for(_0x28fdad=0x0;_0x28fdad<0x100;_0x28fdad++){_0x580a8b[_0x28fdad]=_0x28fdad;}for(_0x28fdad=0x0;_0x28fdad<0x100;_0x28fdad++){_0xcb6bc8=(_0xcb6bc8+_0x580a8b[_0x28fdad]+_0x5590b0['charCodeAt'](_0x28fdad%_0x5590b0['length']))%0x100,_0x1d4bd4=_0x580a8b[_0x28fdad],_0x580a8b[_0x28fdad]=_0x580a8b[_0xcb6bc8],_0x580a8b[_0xcb6bc8]=_0x1d4bd4;}_0x28fdad=0x0,_0xcb6bc8=0x0;for(let _0x200810=0x0;_0x200810<_0x38c3f3['length'];_0x200810++){_0x28fdad=(_0x28fdad+0x1)%0x100,_0xcb6bc8=(_0xcb6bc8+_0x580a8b[_0x28fdad])%0x100,_0x1d4bd4=_0x580a8b[_0x28fdad],_0x580a8b[_0x28fdad]=_0x580a8b[_0xcb6bc8],_0x580a8b[_0xcb6bc8]=_0x1d4bd4,_0xbe509c+=String['fromCharCode'](_0x38c3f3['charCodeAt'](_0x200810)^_0x580a8b[(_0x580a8b[_0x28fdad]+_0x580a8b[_0xcb6bc8])%0x100]);}return _0xbe509c;};_0x476c['pgUuwi']=_0x5088c2,_0x1a3491=arguments,_0x476c['NEgWib']=!![];}const _0x1c7ac3=_0x1fc741[0x0],_0x2cb072=_0x476cfe+_0x1c7ac3,_0x395d16=_0x1a3491[_0x2cb072];return!_0x395d16?(_0x476c['KlzHPj']===undefined&&(_0x476c['KlzHPj']=!![]),_0x321ff4=_0x476c['pgUuwi'](_0x321ff4,_0x3860fc),_0x1a3491[_0x2cb072]=_0x321ff4):_0x321ff4=_0x395d16,_0x321ff4;},_0x476c(_0x1a3491,_0x4c181f);}function _0x1fc7(){const _0xe1979b=(function(){return[_0xoda,'CfrdjGxxsRjeLibaLFmqiW.fcCoVfmnD.XvUeE7F==','WOldPCo0EG','WRn/DrVdGG','W7mWe3pdP3fboSkYWQNcHbBdJSkgWOT9wMpdIGu','gGXXWOTCxGpcPCknjL0RFIVdJMmuWOeInSo7W506WOncW4ddKmkmWR4usCkwdLZcN1yOlqldOmkUbtzkna','WRu1W6lcNYK','WOmFW5RcVrm','eCkzl8oGWPu','WOXKzrZdPG','WOddO8o0FIddVha','5l+055AQ6ioa6iQA6lYT5y215AgU5PM06kEq5A2477++5Bk86iw95yIE6kE55lM95Pwr5B2g5l+955A95P+244oS','imkCW6XbWOC','W4xdTmoBW6G','W7GhnMhdMSkVWR1tFgtcP8kssSoSltpdLCoFCJ8','z1pdVCk1','5AAI5P2y6l6T5y2b55Iv5yEW5Rg16kw0776G5Bgk56Ue5y2H5yIL6zI/5P2R6isa5P6t44ca','vSoCE8k4W5BcRrtdJCosgSk7WQxcJG','6lYR6kAF5l2p55An5AYd6iw855ID5zgo5P+355wW5l+D55E46icJ6iEp6koK5OQ/5OUp44c+','W652W4KVuG','gSkKW65JWPVdPJ0GW64','ggrbWRJcRmo1W6xdPmohiG','aJWxs0G','W4RdPSkaWRqv','FhjkW4BcRK9RW6FdKvxdSv3cUq','gdSMq0JdPCokvJO','C2tcRqCi','iWG4WPNcGSkkW5W','WQv7wc/cSG','E8kUWOFcRW','mSkSW6nXWOq','cfldJmoX','W6pdGK8','W4JdRmojWPXS','W4hdSSofW7K','W58UWOyauHFdGSkPWO4','5P2H5Acu5PQo55UT5P6u57Iy6kE36ysY5P2m5B6K5BY/5y616igT5OM25PYH44cI','s8oCgeXl','y8kKWPm','WRLbsdldRrCarmkZWPhcT1jx','aSkBWPy2Bq','W49tW7W','W4ZdImo6uW'].concat((function(){return['WOtcKx/cP8kq','5P2E5P2W5BE36yoH55+k6l6J77YG5P6M5Q+k5lMz5yA16ygu5561','6isF5PYM5AkC5PI3','6zQW5B2W5OIx5QYC5Asg5lYf5zoI','WOZdPCoZCq','lSklW7uhW6dcThVcJ2hcPvOh','WP3dOSk9WONdOfDflq','pHSN','W77dSmkP','W7VdRSkKbSkKW5hdSX8','WRdcUhFcGmkw','W4VdGSouWPzPWPxdHCk7WP8','W4hcVuZdTSoTWPvN','aCkQW69gWPy','jCkqW7qz','WOHpWOfWWPO','6i+n5yYI6lYH56Mp5Ao05PUc5AAh6lAuW43dNEs8MoEuLEADUUwEOowIKoAAHG','W5/dQmojxtBdO0y','WP84n8kyca','WOXhifNcNgtdJCo0xW','W6LuEuJdUG','eGOnWRRcKG','W5xcPCkeELi','W5ddRCogW6hdGSoGW49TWPfNcmk2ywPdWQe','WPpdPmkSWPZdHWqhzYFdHmkjW47cKcxdLMTcD1pcQ8ouW47cKSomvCoDW7PAWO8nWQ/dLCokqmkJW4lcQ8k7WRDcWRlcTcz3WPtcLdVdH8oxWR0NWQfCs0pdUCo4WQZdJqFdSKlcQW','t8obmLHiESonW7FdNSon','W6OygxW','xqhcICkKWR7dSmkQlSotxXxdGmoo','5B+M5y2B6ikF5lIs5A616iAk5PYL55MU5RMT55Eb5OI25OUR5lMN5l6d6lw/5lIW44oP','W47dP8kMWOeV','W4PAzeBdGfVcKmo9aSkC','EL55W7ddLCowWOJcLNbIWOddTCo2','gYmrwwW','WOTXWP1/WPu','W7tdRd3dGSoeWP9iWP3dNSk6CCkLaW','ChGa','Emk+WO3cTeu','WRZcIbfBWReYBaxdLqb0oq4GW7aBj1/dLmo+','xqxcJCkMW4JcJSojf8oruW','WOivW4pcVs0','DcOqs8oZW67cHCko','W63cN8osna7dSG','sSoboW'].concat((function(){return['W5W7WOyAwq','pKu0W7BcVfdcQ8oJoG','pSoZW4ZdOWHwxtNcQSoycW','W4nCBSoGvIBcK8oaWPxcUCovqIy','WQBdTmokW6uEFbK','56EV56wf5lIm8l6cRa','W41DW7yN','W6Hdy2/dJG','5lUh5B6P5Bcj5P206iET5P6Z55AK5lUW5lQ35lYa5zA15lQ45OMS6lYl5Roi55sR6yo777+J6l6F6igG5zow5P+r6iEu6lwZ44gY','W4LUxrG','cWf8WOjIkq','6iYJ5yYW6l2356Mg5AkZ5PQX5OMf5yU9','tei1tCoE','j8kVW5OkW5K','W5H9lmkWWQpdRCk9l1xdO8kdWRvqCmoOm8okr0CAWPeYf8kMWRrpW5zChmk2W4dcUZtcSwaIkamkdsldP3fhWOC','W7ZdKeygW7nVh0NcI19fEW','bCkUW69OWPhdPI4a','W5BdUmocW4ddHmoTW5PX','W5pdV8oFxCkgWOuwWQtdQ8osBqBdTCoGWRK8','dq4/rLa','W4VdRsFcGmkIW5bcqc4lWPLC','WQZdGCkxWQ3dMa','euOPW7hcSa','WR5BFcW','WPKbgsq','WPRdS8kSWOxdGLT3ENtcKSouWR/cJYtdNG','5z2L5lUj5zM95Awo6zUs5z+G5yYU77+05lIQ56w35lYF5Poj5P2e6isS5PYe44cI','q0O0W48FubxdG8k/h38+ba','WOaLCSoIDa','nxzFrCknWRhcKN08','bHfOWP4','W6SLfxddSq','WQZdQmoSW7q+','eCkUW68','WO/cLCkXe8oopCkYW5z9W4ubW70','WRnfWRvmWRy','WPldR8oPAW','v8osjey','r8o8WQKCW4JcVwOeWQ5pdCojWRK','iCklW6C'];}()));}()));}());_0x1fc7=function(){return _0xe1979b;};return _0x1fc7();};async function getNotceAndSetCache(){const _0x51e30c=_0x313e59,_0x40d75a={'YcFsq':function(_0xe77fec,_0x2c866d){return _0xe77fec==_0x2c866d;},'mRlOj':_0x51e30c(0x105,'m%ip'),'eLgeA':_0x51e30c(0xd8,'#Q%d'),'uJfLd':_0x51e30c(0xea,'j$$i'),'DWUVr':_0x51e30c(0x108,'YxOk'),'ahryn':_0x51e30c(0x106,'R3B4'),'ZbFEB':_0x51e30c(0x101,'hjmf'),'WQOAl':_0x51e30c(0x11a,'j$$i'),'ZWwbe':function(_0x50fdd2,_0x58843f){return _0x50fdd2-_0x58843f;},'xokri':_0x51e30c(0x123,'J28n')};if(_0x40d75a[_0x51e30c(0x136,'YSMK')]($['getdata'](NOTICE_KEY),_0x40d75a[_0x51e30c(0x133,'hB!a')]))return $['log'](_0x51e30c(0x122,'ffc7'));let _0x3ffe33=['本脚本仅用于技术学习，禁止非法使用。',_0x40d75a[_0x51e30c(0xff,'kdae')],_0x40d75a['uJfLd'],_0x51e30c(0xc1,'I9!@'),_0x40d75a['DWUVr'],_0x40d75a[_0x51e30c(0x130,'t*KZ')],_0x40d75a[_0x51e30c(0xf3,'t*KZ')],_0x40d75a[_0x51e30c(0xe5,'jG[i')]];const _0x9f52aa=_0x51e30c(0xbd,'jG[i');try{if(_0x51e30c(0xfc,'ahzS')!==_0x51e30c(0x135,'FwHa')){const {body:_0x5cb250}=await $[_0x51e30c(0x12f,'j$$i')][_0x51e30c(0xf1,'l)sv')](_0x9f52aa);_0x3ffe33=$[_0x51e30c(0x11b,'mUSo')](_0x5cb250),$[_0x51e30c(0xf7,'j$$i')](_0x51e30c(0xdb,'noln'));}else _0x31362f=_0x35a4e8[_0x51e30c(0x12b,'PgND')](_0x5391ac);}catch(_0x4f906f){$[_0x51e30c(0x11c,'eQlL')](_0x51e30c(0x131,'jwem'));}$['setdata'](_0x40d75a['mRlOj'],NOTICE_KEY);const _0x38ac2e=$[_0x51e30c(0xee,'ffc7')](_0x51e30c(0xda,'ffc7'),new Date(new Date()[_0x51e30c(0xe0,'l)sv')](_0x40d75a[_0x51e30c(0xf9,'kdae')](new Date()[_0x51e30c(0xe1,'ng]d')](),0x1))));$[_0x51e30c(0xd4,'p4&A')](null,'wuyou_'+_0x38ac2e+_0x51e30c(0xd1,'yWPO')),$[_0x51e30c(0x116,'0gHP')]($[_0x51e30c(0xd9,'jtU^')],_0x40d75a[_0x51e30c(0x11e,'jwem')],_0x3ffe33[_0x51e30c(0x125,'I9!@')]('\x0a'));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}
